!function(a,t){"use strict";Foundation.libs.magellan={name:"magellan",version:"5.0.3",settings:{active_class:"active",threshold:0},init:function(t,e){this.fixed_magellan=a("[data-magellan-expedition]"),this.magellan_placeholder=a("<div></div>").css({height:this.fixed_magellan.outerHeight(!0)}).hide().insertAfter(this.fixed_magellan),this.set_threshold(),this.set_active_class(e),this.last_destination=a("[data-magellan-destination]").last(),this.events()},events:function(){var e=this;a(this.scope).off(".magellan").on("arrival.fndtn.magellan","[data-magellan-arrival]",function(){var t=a(this),i=t.closest("[data-magellan-expedition]"),n=i.attr("data-magellan-active-class")||e.settings.active_class;t.closest("[data-magellan-expedition]").find("[data-magellan-arrival]").not(t).removeClass(n),t.addClass(n)}),this.fixed_magellan.off(".magellan").on("update-position.fndtn.magellan",function(){a(this)}).trigger("update-position"),a(t).off(".magellan").on("resize.fndtn.magellan",function(){this.fixed_magellan.trigger("update-position")}.bind(this)).on("scroll.fndtn.magellan",function(){var i=a(t).scrollTop();e.fixed_magellan.each(function(){var t=a(this);"undefined"==typeof t.data("magellan-top-offset")&&t.data("magellan-top-offset",t.offset().top),"undefined"==typeof t.data("magellan-fixed-position")&&t.data("magellan-fixed-position",!1);var n=i+e.settings.threshold>t.data("magellan-top-offset"),l=t.attr("data-magellan-top-offset");t.data("magellan-fixed-position")!=n&&(t.data("magellan-fixed-position",n),n?(t.addClass("fixed"),t.css({position:"fixed",top:0}),e.magellan_placeholder.show()):(t.removeClass("fixed"),t.css({position:"",top:""}),e.magellan_placeholder.hide()),n&&"undefined"!=typeof l&&0!=l&&t.css({position:"fixed",top:l+"px"}))})}),this.last_destination.length>0&&a(t).on("scroll.fndtn.magellan",function(){var i=a(t).scrollTop(),n=i+a(t).height(),l=Math.ceil(e.last_destination.offset().top);a("[data-magellan-destination]").each(function(){var t=a(this),s=t.attr("data-magellan-destination"),o=t.offset().top-t.outerHeight(!0)-i;o<=e.settings.threshold&&a("[data-magellan-arrival='"+s+"']").trigger("arrival"),n>=a(e.scope).height()&&l>i&&n>l&&a("[data-magellan-arrival]").last().trigger("arrival")})})},set_threshold:function(){"number"!=typeof this.settings.threshold&&(this.settings.threshold=this.fixed_magellan.length>0?this.fixed_magellan.outerHeight(!0):0)},set_active_class:function(a){a&&a.active_class&&"string"==typeof a.active_class&&(this.settings.active_class=a.active_class)},off:function(){a(this.scope).off(".fndtn.magellan"),a(t).off(".fndtn.magellan")},reflow:function(){}}}(jQuery,this,this.document);